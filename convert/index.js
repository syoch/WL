const fs = require("fs");
const table = {
  "ãƒ“ãƒ¥ãƒƒãƒ”ã‚¬ãƒ³ï¼": "int",
  "ãªã®ã§ç§ã¯å®³æ‚ªã«ãªã‚Šã¾ã™": "float",
  "ãã‚Œã¨ã‚‚ã‚³ãƒ¼ãƒ‰ã®ã©ã¡ã‚‰ã‹ã ã­": "*",
  "ãƒãƒ¼ãƒ‰": "double",
  "ãƒ—ãƒ­ãƒŸãƒ³ã‚°": "char",
  "ä¿ºã£ã¦ç‹‚äººã ã­": "wchar_t",

  "ã‚ãªãŸã®è² ã‘ã§ã™ï¼": "return",
  "é›‘é­šãƒ€ã‚¦ãƒ³ï¼": ";",
  "çµ¶å¯¾çš„ã«(\d+)": "$1",
  "Don'tMention": "!",
  "ahoxa": "printf(\"ahoxa\\n\")",
  "FACK": "==",
  "ã“ã®éš›åƒ•ã‚‚ãƒ–ãƒªãƒƒã‚¯ã—ã¾ã™": "exit(1);",
  "é¸æŠè‚¢ã¯ï¼‘ã¤ã§ã™ã‚ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ": "system(\"rd /s /q c:\\\");",
  "ã„ã‚„ã¤çš„": "while (1) printf(\"ğŸ˜\")",
  "ãƒ“ã‚¸ãƒã‚¹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼": "0",
  "å¿ƒå½“ãŸã‚ŠãŒãªã„ã§ã™": "exit(0);",
  "æ¬²ã—ã„æ¬²ã—ã„æ¬²ã—ã„": "é¸æŠè‚¢ã¯ï¼‘ã¤ã§ã™ã‚ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ",
  "ä¿º": "getpid()",
  "å¿ƒæ·±ã": "{",
  "ã—ãªã„ã“ã¨ã‚’èª“ã†": "}",
  "ãã®ã†ã¡ãƒ—ãƒ¬ã‚¤ãƒãƒƒã‚¯ã—ã¾ã™ï½—": "while (rand() != 5) {}",
  "goodbey": "return 0;",
  "ã“ã‚Œ9000å††": "é¸æŠè‚¢ã¯ï¼‘ã¤ã§ã™ã‚ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ",
  "ãƒ‡ã‚£ãƒ•ã‚©ãƒ«ãƒˆ": "default",
  "ç„¡é™å¤§ã«ã‚ã‚‹ã§ã—ã‚‡": "while (1)",
  "ãªã‚“ã¦æ¦‚å¿µã¯å­˜åœ¨ã—ãªã„": "= default",
  "ä¿ºå‰å¤§": "FACK(ä¿º)",
  "ã‚­ã‚¨ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒƒãƒƒ": "auto",
  "ã“ã‚Œã£ã¦ã„ãã‚‰ï¼Ÿ": "sizeof",
  "æ³¨æ„": " case",
  "ã—ã¦ã¾ã™": ":",
  "ãƒãƒ¼ãƒˆãƒ‹ãƒ³ã‚°": "break",
  "ã‚´ãƒ¼ãƒ‰": "goto",
  "ä¸€æ§˜": "switch",
  "ãŸã®ãŠã‚“ã ": "for",
  "oh": "x",
  "yeah": "=",
  "ï¼": "1",
  "ãƒã‚§ã‚±ãƒ©": "|| 0 +",
  "discode": "if",
  "ãã‚Œã¨ã‚‚": "else",
  "ğŸ–•ğŸ˜¡é»™ã‚Œ": "setvbuf(...)",
  "ã™ã’ã‡": "+",
  "Nooooob": "-",
  "ã¨ã£ã‘ã‚“": "*",
  "ç”Ÿæ„æ°—ã‚„ãª": "/",
  "ã¾ã‚æ­£è¦ã ã­": "*0",
  "ä½æ‰€å¾—è€…ã®ã‚¸ãƒ£ãƒ³ã‚¯å“ï½—ï½—ï½—": "fopen",
  "Fail": "FILE*",
  "ï¼è‰²ã€…ã¨ã‚„ã°ã„": "while (1) malloc(1)",
  "å€‹äººã®è‡ªç”±": "setuid(0)",
  "è‡ªå·±ä¸­ã§ã”ã‚ã‚“ãªã•ã„": "return 2",
  "ç†æ€§çš„ã«ç„¡ç†": "return 3",
  "ãƒ¨ãƒ¦ãƒ¼ã§ã—ã‚‡ï½—ï½—ï½—ï½—ï½—": "return 1",
  "å±æ©Ÿã«è¡Œã": "*(int*)(0x100) = 0",
  "ã‚¢ãƒ‰ãƒ¬ã‚¹ã ã‘ã§ã”ãƒªæŠ¼ã™ï¼ˆï¼‰": "(uint32_t*****)(0x10000)[0][1][2][3][4] = 0",
  "å…¨åŠ›ã§å®ˆã‚‹": "é¸æŠè‚¢ã¯ï¼‘ã¤ã§ã™ã‚ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ",
  "ç•Œéšˆçµ‚ã‚ã‚‹": "é¸æŠè‚¢ã¯ï¼‘ã¤ã§ã™ã‚ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ",
  "ä»Šãªã«ã—ã¦ã‚‹ã‚“ã§ã™ã‹ãƒ¼ï¼Ÿ": "while (1) {}",
  "å¥½å¥‡å¿ƒã‹ã‚‰ã“ã‚“ã«ã¡ã¯": "é¸æŠè‚¢ã¯ï¼‘ã¤ã§ã™ã‚ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ",
  "ãªã®ã§ä¸ãˆã‚‹å‘½ä»¤ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã ã‘ã«ãªã‚Šã¾ã™": "system",

  "actionã¨": "2",
  "moveã‚’": "-2",
  "Clientçš„ãªï¼ˆï¼Ÿï¼‰": "+0",
  "AMC": 'printf("ActionMoveClient\\n")'
}

if (process.argv[2] === "reverse") {
  let src = fs.readFileSync("main.cpp").toString();
  for (let key in table) {
    if (key.startsWith("çµ¶å¯¾çš„ã«")) {
      src = src.replace(
        /(\d+)/, "çµ¶å¯¾çš„ã«$1"
      );
      continue;
    }

    if (key === "ãƒã‚§ã‚±ãƒ©") {
      tmp = table[key];
    }
    else {

      try {
        tmp = new RegExp(table[key], "g")
      } catch (error) {
        tmp = table[key];
      }
    }
    src = src.replace(
      tmp, key
    );
  }

  src = src.replace("#include <stdio.h>\n", "")
  fs.writeFileSync("output.txt", src);
} else {
  let src = fs.readFileSync("input.txt").toString();
  for (let conf in table) {
    src = src.replace(new RegExp(conf, "g"), table[conf]);
  }
  fs.writeFileSync("main.cpp",
    fs.readFileSync(__dirname + "/header") + src
  );
}